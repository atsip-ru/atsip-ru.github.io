<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Задание определенного направления (выход через конкретный транк) - AtSip.Net</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="atsip" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/logo.png">
				</div><div class="logo__item logo__text">
					<div class="logo__title">atsip</div>
					<div class="logo__tagline">Просто сайт для atsip.ru</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Задание определенного направления (выход через конкретный транк)</h1>
			
		</header>
		<div class="content post__content clearfix">
			<p>Для начала создаем нужный нам маршрут: <strong>Подключения → Исходящая маршрутизация</strong>.</p>
<p><img src="/6d792aa70fd0b7d7f644c884205cf8cc.png" alt="6d792aa70fd0b7d7f644c884205cf8cc.png"></p>
<p>Задаем произвольно описание , необходимый нам CallerID и транк, через который будет передаваться вызов с этим CallerID (если транк с регистрацией и допустим только один CallerID, то можно указать «<strong>Форсировать использование транкового CID (Force Trunk CID) в настройках транка</strong>»)</p>
<p><img src="/bf2ae29dc9e282da384bee12fe2a4e07.png" alt="bf2ae29dc9e282da384bee12fe2a4e07.png"></p>
<p>Задаем необходимые (допустимые) нам шаблоны набора номеров:</p>
<p><img src="/0494b10004354ef8df2036731a4db6b8.png" alt="0494b10004354ef8df2036731a4db6b8.png"></p>
<p>Можете включить запись вызова:</p>
<p><img src="/68dfc868664b4fe78ecf2c70c1df736e.png" alt="68dfc868664b4fe78ecf2c70c1df736e.png"></p>
<p>После этого обязательно <strong>Сохраняем</strong> и <strong>Применяем изменения.</strong></p>
<p>Как видим — появился новый маршрут в исходящих маршрутах.</p>
<p><img src="/resources/6f797669fdc2cfc0d80ba5a11a559676.png" alt="6f797669fdc2cfc0d80ba5a11a559676.png"></p>
<p>Ещё будет неплохо поместить его в самый низ по приоритету маршрутов — чтобы не мешал остальным номерам.</p>
<p>Теперь отправляемся в <strong>Подключения</strong> → <strong>Custom Contexts</strong> и создаем новый контекст:</p>
<p><img src="/089b090d39440d041f2ed17d53a2b460.png" alt="089b090d39440d041f2ed17d53a2b460.png"></p>
<p>Жмем <strong>Submit</strong> и после этого он раскрывается:</p>
<p><img src="/71e6fe78de27f0cb8931e6338d9d1cad.png" alt="71e6fe78de27f0cb8931e6338d9d1cad.png"></p>
<h3 id="в-меню-see-all-to-выбираем-deny-те-запретим-всё-а-после-разрешим-необходимое">В меню <strong>See All To</strong>: выбираем <strong>Deny</strong>, т.е. запретим всё, а после разрешим необходимое.</h3>
<p>Теперь рассмотрим и повключаем необходимое:</p>
<h3 id="default-internal-context"><strong>Default Internal Context</strong></h3>
<ul>
<li>
<p><em>Call Parking</em> — отвечает за парковку вызовов</p>
</li>
<li>
<p><em>Custom Internal Dialplan</em> — отвечает за использование контекста from-internal-custom.</p>
</li>
</ul>
<h3 id="internal-dialplan"><strong>Internal Dialplan</strong></h3>
<p>Тут как правило по использованию приложений:</p>
<ul>
<li>
<p><em>app-callwaiting-cwoff</em> и <em>app-callwaiting-cwon</em> — позволяет использовать включение и отключение Call Waiting;</p>
</li>
<li>
<p><em>ext-meetme</em> — приложение конференции;</p>
</li>
<li>
<p><em>app-fmf-toggle, ext-findmefollow</em> и <em>fmgrps</em> — относятся к модулям Follow-Me и Find-Me;</p>
</li>
<li>
<p><em>app-calltrace</em> — трассировка вызова (из Сервисных кодов);</p>
</li>
<li>
<p><em>app-blacklist</em> — использование приложения Черный список;</p>
</li>
<li>
<p><em>app-echo-test</em> — Эхо-тест;</p>
</li>
<li>
<p><em>app-speakextennum</em> — Произношение вашего внутреннего номера;</p>
</li>
<li>
<p><em>app-speakingclock</em> — Говорящие часы;</p>
</li>
<li>
<p><em>app-recordings</em> — не уверен, но скорее всего Запись входящего звонка по необходимости;</p>
</li>
<li>
<p><em>ext-queues</em> — Приложение очередей (позволяет набирать очередь по внутреннему номеру);</p>
</li>
<li>
<p><em>ext-group</em> — Набор групп вызова напрямую;</p>
</li>
<li>
<p><em>app-dialvm</em> и <em>app-vmmain</em> — позволяют проверять и оставлять голосовую почту соответственно;</p>
</li>
<li>
<p><em>ext-local-confirm</em> — использование опции Подтверждать вызовы;</p>
</li>
<li>
<p><em>findmefollow-ringallv2</em> — до конца неясно, но похоже на использование стратегии обзвона ringallv2 для Следуйте-Сюда/Найди-меня;</p>
</li>
<li>
<p><em>app-pickup</em> — разрешает использование Назначенного перехвата звонка;</p>
</li>
<li>
<p><em>app-chanspy</em> — использование Шпионского канала;</p>
</li>
<li>
<p><em>ext-test</em> — судя по диалплану — это Симуляция входящего звонка;</p>
</li>
<li>
<p><em>ext-local</em> позволяет вызывать внутренние номера.</p>
</li>
</ul>
<p>Так что если хотите запретить всё, кроме вызова внутренних номеров — разрешайте только <em>ext-local</em>.</p>
<h3 id="outbound-routes"><strong>Outbound Routes</strong></h3>
<p>Вот здесь и выбираем созданный нами маршрут <em>from-buhgalter</em>. Можно выбрать и другие разрешенные маршруты и расположить их в порядке возрастания совпадения (по приоритетам: чем ниже значение — тем выше в списке и тем выше приоритет).</p>
<p>При этом напротив <strong>ALL OUTBOUND ROUTES</strong> должно стоять <strong>Deny</strong>.</p>
<p><img src="/5c69ad27d3674c662cc086e02179d934.png" alt="5c69ad27d3674c662cc086e02179d934.png"></p>
<p>С охраняем созданный пользовательский контекст.</p>
<p>И теперь нам осталось применить его к внутреннему номеру.</p>
<p>Нужная нам настройка на вкладке <strong>Расширенный</strong>.</p>
<p><img src="/8fcf8dc6f9bea003d5a96231cbab2cc2.png" alt="8fcf8dc6f9bea003d5a96231cbab2cc2.png"></p>
<p>Вот здесь напротив <strong>Custom Context</strong> и выбираем наш созданный пользовательский контекст <strong>from-buhgalter</strong>.</p>
<p>Сохраняем и применяем настройки.</p>
<p>Теперь пользователю будет разрешено звонить туда, куда мы определили для него.</p>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 AtSip.Net.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>