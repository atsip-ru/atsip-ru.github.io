<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Работа с CLI Asterisk | AtSIP</title>
<meta name=keywords content><meta name=description content="CLI (Command Line Interface) - очень полезный инструмент диагностики и отладки при работе с Asterisk.
Войти в него можно командой asterisk -rvv (или sudo asterisk -rvv), где количество v (verbose) означает детальность вывода, а r подключение к Asterisk.


При этом отобразится пользователь, от которого запущен Asterisk, его версия, имя машины, на которой запущено приложение и pid процесса.
*CLI> означает интерактивный режим работы в CLI Asterisk.
Список всех доступных для Вашего Asterisk команд можно узнать командой core show help.
В Asterisk также отлично работает автодополнение команд, т.е. введя например core show и нажав клавишу Tab оно предложит все доступные варианты:


Ещё одна удобная функция CLI - like, тоесть поиск возможных вариантов среди всех доступных, например:


для like даже доступны базовые регулярные выражения, такие как якори и диапазоны:

"><meta name=author content="Dmitriy Q"><link rel=canonical href=http://localhost:1313/instructions/asterisk-cli/><meta name=yandex-verification content="a654f52a611b9bb6"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/instructions/asterisk-cli/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Работа с CLI Asterisk"><meta property="og:description" content="CLI (Command Line Interface) - очень полезный инструмент диагностики и отладки при работе с Asterisk.
Войти в него можно командой asterisk -rvv (или sudo asterisk -rvv), где количество v (verbose) означает детальность вывода, а r подключение к Asterisk.


При этом отобразится пользователь, от которого запущен Asterisk, его версия, имя машины, на которой запущено приложение и pid процесса.
*CLI> означает интерактивный режим работы в CLI Asterisk.
Список всех доступных для Вашего Asterisk команд можно узнать командой core show help.
В Asterisk также отлично работает автодополнение команд, т.е. введя например core show и нажав клавишу Tab оно предложит все доступные варианты:


Ещё одна удобная функция CLI - like, тоесть поиск возможных вариантов среди всех доступных, например:


для like даже доступны базовые регулярные выражения, такие как якори и диапазоны:

"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/instructions/asterisk-cli/"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="instructions"><meta property="article:published_time" content="2024-11-02T15:10:21+05:00"><meta property="article:modified_time" content="2024-11-02T15:10:21+05:00"><meta property="og:site_name" content="AtSIP"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Работа с CLI Asterisk"><meta name=twitter:description content="CLI (Command Line Interface) - очень полезный инструмент диагностики и отладки при работе с Asterisk.
Войти в него можно командой asterisk -rvv (или sudo asterisk -rvv), где количество v (verbose) означает детальность вывода, а r подключение к Asterisk.


При этом отобразится пользователь, от которого запущен Asterisk, его версия, имя машины, на которой запущено приложение и pid процесса.
*CLI> означает интерактивный режим работы в CLI Asterisk.
Список всех доступных для Вашего Asterisk команд можно узнать командой core show help.
В Asterisk также отлично работает автодополнение команд, т.е. введя например core show и нажав клавишу Tab оно предложит все доступные варианты:


Ещё одна удобная функция CLI - like, тоесть поиск возможных вариантов среди всех доступных, например:


для like даже доступны базовые регулярные выражения, такие как якори и диапазоны:

"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Instructions","item":"http://localhost:1313/instructions/"},{"@type":"ListItem","position":2,"name":"Работа с CLI Asterisk","item":"http://localhost:1313/instructions/asterisk-cli/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Работа с CLI Asterisk","name":"Работа с CLI Asterisk","description":"CLI (Command Line Interface) - очень полезный инструмент диагностики и отладки при работе с Asterisk. Войти в него можно командой asterisk -rvv (или sudo asterisk -rvv), где количество v (verbose) означает детальность вывода, а r подключение к Asterisk. При этом отобразится пользователь, от которого запущен Asterisk, его версия, имя машины, на которой запущено приложение и pid процесса. *CLI\u0026gt; означает интерактивный режим работы в CLI Asterisk. Список всех доступных для Вашего Asterisk команд можно узнать командой core show help. В Asterisk также отлично работает автодополнение команд, т.е. введя например core show и нажав клавишу Tab оно предложит все доступные варианты: Ещё одна удобная функция CLI - like, тоесть поиск возможных вариантов среди всех доступных, например: для like даже доступны базовые регулярные выражения, такие как якори и диапазоны: ","keywords":[],"articleBody":"CLI (Command Line Interface) - очень полезный инструмент диагностики и отладки при работе с Asterisk. Войти в него можно командой asterisk -rvv (или sudo asterisk -rvv), где количество v (verbose) означает детальность вывода, а r подключение к Asterisk. При этом отобразится пользователь, от которого запущен Asterisk, его версия, имя машины, на которой запущено приложение и pid процесса. *CLI\u003e означает интерактивный режим работы в CLI Asterisk. Список всех доступных для Вашего Asterisk команд можно узнать командой core show help. В Asterisk также отлично работает автодополнение команд, т.е. введя например core show и нажав клавишу Tab оно предложит все доступные варианты: Ещё одна удобная функция CLI - like, тоесть поиск возможных вариантов среди всех доступных, например: для like даже доступны базовые регулярные выражения, такие как якори и диапазоны: Также есть 2 типа команд: show и set - первые абсолютно безвредны и лишь отображают текущее состояние, вторые - изменяют текущее состояние, поэтому советую их использовать крайне осторожно, а лучше менять эти параметры через файлы конфигурации.\nНу и разберу детальность (v значит verbose) вывода лога при вызове:\n1 и 2 уровень:\n3 уровень:\natsip-pbx*CLI\u003e core set verbose 3 Console verbose was 2 and is now 3. == Using SIP RTP Audio TOS bits 184 == Using SIP RTP Audio CoS mark 5 -- Executing [71222@from-internal:1] Macro(\"PJSIP/002-00000031\", \"user-callerid,LIMIT,EXTERNAL,\") in new stack -- Executing [s@macro-user-callerid:1] Set(\"PJSIP/002-00000031\", \"TOUCH_MONITOR=1730780250.107\") in new stack -- Executing [s@macro-user-callerid:2] Set(\"PJSIP/002-00000031\", \"CHANCONTEXT=\") in new stack -- Executing [s@macro-user-callerid:3] Set(\"PJSIP/002-00000031\", \"CHANCONTEXT=\") in new stack -- Executing [s@macro-user-callerid:4] Set(\"PJSIP/002-00000031\", \"CHANEXTENCONTEXT=002-00000031\") in new stack -- Executing [s@macro-user-callerid:5] Set(\"PJSIP/002-00000031\", \"CHANEXTEN=002-00000031\") in new stack -- Executing [s@macro-user-callerid:6] Set(\"PJSIP/002-00000031\", \"CALLERID(number)=002\") in new stack -- Executing [s@macro-user-callerid:7] Set(\"PJSIP/002-00000031\", \"AMPUSER=002\") in new stack -- Executing [s@macro-user-callerid:8] Set(\"PJSIP/002-00000031\", \"HOTDESCKCHAN=002-00000031\") in new stack -- Executing [s@macro-user-callerid:9] Set(\"PJSIP/002-00000031\", \"HOTDESKEXTEN=002\") in new stack -- Executing [s@macro-user-callerid:10] Set(\"PJSIP/002-00000031\", \"HOTDESKCALL=0\") in new stack -- Executing [s@macro-user-callerid:11] ExecIf(\"PJSIP/002-00000031\", \"0?Set(HOTDESKCALL=1)\") in new stack -- Executing [s@macro-user-callerid:12] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(name)=)\") in new stack -- Executing [s@macro-user-callerid:13] GotoIf(\"PJSIP/002-00000031\", \"0?report\") in new stack -- Executing [s@macro-user-callerid:14] ExecIf(\"PJSIP/002-00000031\", \"1?Set(REALCALLERIDNUM=002)\") in new stack -- Executing [s@macro-user-callerid:15] Set(\"PJSIP/002-00000031\", \"AMPUSER=002\") in new stack -- Executing [s@macro-user-callerid:16] GotoIf(\"PJSIP/002-00000031\", \"0?limit\") in new stack -- Executing [s@macro-user-callerid:17] Set(\"PJSIP/002-00000031\", \"AMPUSERCIDNAME=Support-ATC\") in new stack -- Executing [s@macro-user-callerid:18] ExecIf(\"PJSIP/002-00000031\", \"0?Set(__CIDMASQUERADING=TRUE)\") in new stack -- Executing [s@macro-user-callerid:19] GotoIf(\"PJSIP/002-00000031\", \"0?report\") in new stack -- Executing [s@macro-user-callerid:20] Set(\"PJSIP/002-00000031\", \"AMPUSERCID=002\") in new stack -- Executing [s@macro-user-callerid:21] Set(\"PJSIP/002-00000031\", \"__DIAL_OPTIONS=HhTtr\") in new stack -- Executing [s@macro-user-callerid:22] Set(\"PJSIP/002-00000031\", \"CALLERID(all)=\"Support-ATC\" \u003c002\u003e\") in new stack -- Executing [s@macro-user-callerid:23] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CUSDIAL=)\") in new stack -- Executing [s@macro-user-callerid:24] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(all)=\"Support-ATC\" \u003c002\u003e)\") in new stack -- Executing [s@macro-user-callerid:25] GotoIf(\"PJSIP/002-00000031\", \"0?limit\") in new stack -- Executing [s@macro-user-callerid:26] ExecIf(\"PJSIP/002-00000031\", \"1?Set(GROUP(concurrency_limit)=002)\") in new stack -- Executing [s@macro-user-callerid:27] NoOp(\"PJSIP/002-00000031\", \"Macro Depth is 1\") in new stack -- Executing [s@macro-user-callerid:28] GotoIf(\"PJSIP/002-00000031\", \"1?report2:macroerror\") in new stack -- Goto (macro-user-callerid,s,29) -- Executing [s@macro-user-callerid:29] GotoIf(\"PJSIP/002-00000031\", \"1?continue\") in new stack -- Goto (macro-user-callerid,s,47) -- Executing [s@macro-user-callerid:47] Set(\"PJSIP/002-00000031\", \"CALLERID(number)=002\") in new stack -- Executing [s@macro-user-callerid:48] Set(\"PJSIP/002-00000031\", \"CALLERID(name)=Support-ATC\") in new stack -- Executing [s@macro-user-callerid:49] GotoIf(\"PJSIP/002-00000031\", \"0?cnum\") in new stack -- Executing [s@macro-user-callerid:50] Set(\"PJSIP/002-00000031\", \"CDR(cnam)=Support-ATC\") in new stack -- Executing [s@macro-user-callerid:51] Set(\"PJSIP/002-00000031\", \"CDR(cnum)=002\") in new stack -- Executing [s@macro-user-callerid:52] Set(\"PJSIP/002-00000031\", \"CHANNEL(language)=ru\") in new stack -- Executing [71222@from-internal:2] Gosub(\"PJSIP/002-00000031\", \"sub-record-check,s,1(out,71222,dontcare)\") in new stack -- Executing [s@sub-record-check:1] GotoIf(\"PJSIP/002-00000031\", \"0?initialized\") in new stack -- Executing [s@sub-record-check:2] Set(\"PJSIP/002-00000031\", \"__REC_STATUS=INITIALIZED\") in new stack -- Executing [s@sub-record-check:3] Set(\"PJSIP/002-00000031\", \"NOW=1730780250\") in new stack -- Executing [s@sub-record-check:4] Set(\"PJSIP/002-00000031\", \"__DAY=05\") in new stack -- Executing [s@sub-record-check:5] Set(\"PJSIP/002-00000031\", \"__MONTH=11\") in new stack -- Executing [s@sub-record-check:6] Set(\"PJSIP/002-00000031\", \"__YEAR=2024\") in new stack -- Executing [s@sub-record-check:7] Set(\"PJSIP/002-00000031\", \"__TIMESTR=20241105-091730\") in new stack -- Executing [s@sub-record-check:8] Set(\"PJSIP/002-00000031\", \"__FROMEXTEN=002\") in new stack -- Executing [s@sub-record-check:9] Set(\"PJSIP/002-00000031\", \"__MON_FMT=wav\") in new stack -- Executing [s@sub-record-check:10] NoOp(\"PJSIP/002-00000031\", \"Recordings initialized\") in new stack -- Executing [s@sub-record-check:11] ExecIf(\"PJSIP/002-00000031\", \"0?Set(ARG3=dontcare)\") in new stack -- Executing [s@sub-record-check:12] Set(\"PJSIP/002-00000031\", \"REC_POLICY_MODE_SAVE=\") in new stack -- Executing [s@sub-record-check:13] ExecIf(\"PJSIP/002-00000031\", \"0?Set(REC_STATUS=NO)\") in new stack -- Executing [s@sub-record-check:14] GotoIf(\"PJSIP/002-00000031\", \"3?checkaction\") in new stack -- Goto (sub-record-check,s,17) -- Executing [s@sub-record-check:17] GotoIf(\"PJSIP/002-00000031\", \"1?sub-record-check,out,1\") in new stack -- Goto (sub-record-check,out,1) -- Executing [out@sub-record-check:1] NoOp(\"PJSIP/002-00000031\", \"Outbound Recording Check from 002 to 71222\") in new stack -- Executing [out@sub-record-check:2] Set(\"PJSIP/002-00000031\", \"RECMODE=force\") in new stack -- Executing [out@sub-record-check:3] ExecIf(\"PJSIP/002-00000031\", \"0?Goto(routewins)\") in new stack -- Executing [out@sub-record-check:4] ExecIf(\"PJSIP/002-00000031\", \"0?Goto(routewins)\") in new stack -- Executing [out@sub-record-check:5] Gosub(\"PJSIP/002-00000031\", \"recordcheck,1(force,out,71222)\") in new stack -- Executing [recordcheck@sub-record-check:1] NoOp(\"PJSIP/002-00000031\", \"Starting recording check against force\") in new stack -- Executing [recordcheck@sub-record-check:2] Goto(\"PJSIP/002-00000031\", \"force\") in new stack -- Goto (sub-record-check,recordcheck,5) -- Executing [recordcheck@sub-record-check:5] Set(\"PJSIP/002-00000031\", \"__REC_POLICY_MODE=FORCE\") in new stack -- Executing [recordcheck@sub-record-check:6] GotoIf(\"PJSIP/002-00000031\", \"1?startrec\") in new stack -- Goto (sub-record-check,recordcheck,16) -- Executing [recordcheck@sub-record-check:16] NoOp(\"PJSIP/002-00000031\", \"Starting recording: out, 71222\") in new stack -- Executing [recordcheck@sub-record-check:17] ExecIf(\"PJSIP/002-00000031\", \"0?Set(RECFROMEXTEN=)\") in new stack -- Executing [recordcheck@sub-record-check:18] ExecIf(\"PJSIP/002-00000031\", \"1?Set(RECFROMEXTEN=002)\") in new stack -- Executing [recordcheck@sub-record-check:19] Set(\"PJSIP/002-00000031\", \"__CALLFILENAME=out-71222-002-20241105-091730-1730780250.107\") in new stack -- Executing [recordcheck@sub-record-check:20] MixMonitor(\"PJSIP/002-00000031\", \"2024/11/05/out-71222-002-20241105-091730-1730780250.107.wav,abi(),\") in new stack -- Executing [recordcheck@sub-record-check:21] Set(\"PJSIP/002-00000031\", \"__MIXMON_ID=\") in new stack -- Executing [recordcheck@sub-record-check:22] Set(\"PJSIP/002-00000031\", \"__RECORD_ID=PJSIP/002-00000031\") in new stack -- Executing [recordcheck@sub-record-check:23] Set(\"PJSIP/002-00000031\", \"__REC_STATUS=RECORDING\") in new stack -- Executing [recordcheck@sub-record-check:24] Set(\"PJSIP/002-00000031\", \"CDR(recordingfile)=out-71222-002-20241105-091730-1730780250.107.wav\") in new stack == Begin MixMonitor Recording PJSIP/002-00000031 -- Executing [recordcheck@sub-record-check:25] Return(\"PJSIP/002-00000031\", \"\") in new stack -- Executing [out@sub-record-check:6] Return(\"PJSIP/002-00000031\", \"\") in new stack -- Executing [71222@from-internal:3] Set(\"PJSIP/002-00000031\", \"ROUTE_CIDSAVE=\"Support-ATC\" \u003c002\u003e\") in new stack -- Executing [71222@from-internal:4] Set(\"PJSIP/002-00000031\", \"_ROUTEID=3\") in new stack -- Executing [71222@from-internal:5] Set(\"PJSIP/002-00000031\", \"_ROUTENAME=Shar-Orsk_7XXX\") in new stack -- Executing [71222@from-internal:6] Set(\"PJSIP/002-00000031\", \"MOHCLASS=default\") in new stack -- Executing [71222@from-internal:7] Set(\"PJSIP/002-00000031\", \"_CALLERIDNAMEINTERNAL=Support-ATC\") in new stack -- Executing [71222@from-internal:8] Set(\"PJSIP/002-00000031\", \"_CALLERIDNUMINTERNAL=002\") in new stack -- Executing [71222@from-internal:9] Set(\"PJSIP/002-00000031\", \"_EMAILNOTIFICATION=FALSE\") in new stack -- Executing [71222@from-internal:10] Set(\"PJSIP/002-00000031\", \"_NODEST=\") in new stack -- Executing [71222@from-internal:11] Macro(\"PJSIP/002-00000031\", \"dialout-trunk,1,1222,,off\") in new stack -- Executing [s@macro-dialout-trunk:1] Set(\"PJSIP/002-00000031\", \"DIAL_TRUNK=1\") in new stack -- Executing [s@macro-dialout-trunk:2] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_OPTIONS=Hhtr)\") in new stack -- Executing [s@macro-dialout-trunk:3] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_OPTIONS=HhTr)\") in new stack -- Executing [s@macro-dialout-trunk:4] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_OPTIONS=Hhtr)\") in new stack -- Executing [s@macro-dialout-trunk:5] GosubIf(\"PJSIP/002-00000031\", \"0?sub-pincheck,s,1()\") in new stack -- Executing [s@macro-dialout-trunk:6] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(num)=002)\") in new stack -- Executing [s@macro-dialout-trunk:7] GotoIf(\"PJSIP/002-00000031\", \"0?disabletrunk,1\") in new stack -- Executing [s@macro-dialout-trunk:8] Set(\"PJSIP/002-00000031\", \"DIAL_NUMBER=1222\") in new stack -- Executing [s@macro-dialout-trunk:9] Set(\"PJSIP/002-00000031\", \"DIAL_TRUNK_OPTIONS=HhTtr\") in new stack -- Executing [s@macro-dialout-trunk:10] Set(\"PJSIP/002-00000031\", \"OUTBOUND_GROUP=OUT_1\") in new stack -- Executing [s@macro-dialout-trunk:11] Set(\"PJSIP/002-00000031\", \"DIAL_TRUNK_OPTIONS=T\") in new stack -- Executing [s@macro-dialout-trunk:12] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_TRUNK_OPTIONS=)\") in new stack -- Executing [s@macro-dialout-trunk:13] GotoIf(\"PJSIP/002-00000031\", \"1?nomax\") in new stack -- Goto (macro-dialout-trunk,s,15) -- Executing [s@macro-dialout-trunk:15] GotoIf(\"PJSIP/002-00000031\", \"0?skipoutcid\") in new stack -- Executing [s@macro-dialout-trunk:16] Macro(\"PJSIP/002-00000031\", \"outbound-callerid,1\") in new stack -- Executing [s@macro-outbound-callerid:1] NoOp(\"PJSIP/002-00000031\", \"002\") in new stack -- Executing [s@macro-outbound-callerid:2] NoOp(\"PJSIP/002-00000031\", \"\") in new stack -- Executing [s@macro-outbound-callerid:3] NoOp(\"PJSIP/002-00000031\", \"off\") in new stack -- Executing [s@macro-outbound-callerid:4] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(name-pres)=)\") in new stack -- Executing [s@macro-outbound-callerid:5] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(num-pres)=)\") in new stack -- Executing [s@macro-outbound-callerid:6] Set(\"PJSIP/002-00000031\", \"HOTDESCKCHAN=002-00000031\") in new stack -- Executing [s@macro-outbound-callerid:7] Set(\"PJSIP/002-00000031\", \"HOTDESKEXTEN=002\") in new stack -- Executing [s@macro-outbound-callerid:8] Set(\"PJSIP/002-00000031\", \"HOTDESKCALL=0\") in new stack -- Executing [s@macro-outbound-callerid:9] ExecIf(\"PJSIP/002-00000031\", \"0?Set(HOTDESKCALL=1)\") in new stack -- Executing [s@macro-outbound-callerid:10] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(name)=)\") in new stack -- Executing [s@macro-outbound-callerid:11] Set(\"PJSIP/002-00000031\", \"ALLOWTHISROUTE=NO\") in new stack -- Executing [s@macro-outbound-callerid:12] ExecIf(\"PJSIP/002-00000031\", \"0?Set(ALLOWTHISROUTE=YES)\") in new stack -- Executing [s@macro-outbound-callerid:13] ExecIf(\"PJSIP/002-00000031\", \"0?Hangup()\") in new stack -- Executing [s@macro-outbound-callerid:14] ExecIf(\"PJSIP/002-00000031\", \"0?Set(REALCALLERIDNUM=002)\") in new stack -- Executing [s@macro-outbound-callerid:15] ExecIf(\"PJSIP/002-00000031\", \"0?Set(AMPUSER=002)\") in new stack -- Executing [s@macro-outbound-callerid:16] GotoIf(\"PJSIP/002-00000031\", \"1?normcid\") in new stack -- Goto (macro-outbound-callerid,s,20) -- Executing [s@macro-outbound-callerid:20] Set(\"PJSIP/002-00000031\", \"USEROUTCID=\") in new stack -- Executing [s@macro-outbound-callerid:21] Set(\"PJSIP/002-00000031\", \"EMERGENCYCID=\") in new stack -- Executing [s@macro-outbound-callerid:22] ExecIf(\"PJSIP/002-00000031\", \"0?Set(EMERGENCYCID=)\") in new stack -- Executing [s@macro-outbound-callerid:23] Set(\"PJSIP/002-00000031\", \"TRUNKOUTCID=\") in new stack -- Executing [s@macro-outbound-callerid:24] GotoIf(\"PJSIP/002-00000031\", \"1?trunkcid\") in new stack -- Goto (macro-outbound-callerid,s,30) -- Executing [s@macro-outbound-callerid:30] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(all)=)\") in new stack -- Executing [s@macro-outbound-callerid:31] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(all)=)\") in new stack -- Executing [s@macro-outbound-callerid:32] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(all)=)\") in new stack -- Executing [s@macro-outbound-callerid:33] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(all)=002)\") in new stack -- Executing [s@macro-outbound-callerid:34] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(all)=002)\") in new stack -- Executing [s@macro-outbound-callerid:35] Set(\"PJSIP/002-00000031\", \"TIOHIDE=no\") in new stack -- Executing [s@macro-outbound-callerid:36] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(name-pres)=prohib_passed_screen)\") in new stack -- Executing [s@macro-outbound-callerid:37] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(num-pres)=prohib_passed_screen)\") in new stack -- Executing [s@macro-outbound-callerid:38] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(name-pres)=prohib_passed_screen)\") in new stack -- Executing [s@macro-outbound-callerid:39] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CALLERID(num-pres)=prohib_passed_screen)\") in new stack -- Executing [s@macro-outbound-callerid:40] Set(\"PJSIP/002-00000031\", \"CDR(outbound_cnum)=002\") in new stack -- Executing [s@macro-outbound-callerid:41] Set(\"PJSIP/002-00000031\", \"CDR(outbound_cnam)=Support-ATC\") in new stack -- Executing [s@macro-dialout-trunk:17] GosubIf(\"PJSIP/002-00000031\", \"0?sub-flp-1,s,1()\") in new stack -- Executing [s@macro-dialout-trunk:18] Set(\"PJSIP/002-00000031\", \"OUTNUM=1222\") in new stack -- Executing [s@macro-dialout-trunk:19] Set(\"PJSIP/002-00000031\", \"custom=IAX2/shar-orsk\") in new stack -- Executing [s@macro-dialout-trunk:20] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_TRUNK_OPTIONS=M(setmusic^default)T)\") in new stack -- Executing [s@macro-dialout-trunk:21] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_TRUNK_OPTIONS=TM(confirm))\") in new stack -- Executing [s@macro-dialout-trunk:22] Macro(\"PJSIP/002-00000031\", \"dialout-trunk-predial-hook,\") in new stack -- Executing [s@macro-dialout-trunk-predial-hook:1] MacroExit(\"PJSIP/002-00000031\", \"\") in new stack -- Executing [s@macro-dialout-trunk:23] GotoIf(\"PJSIP/002-00000031\", \"0?bypass,1\") in new stack -- Executing [s@macro-dialout-trunk:24] ExecIf(\"PJSIP/002-00000031\", \"1?Set(CONNECTEDLINE(num,i)=1222)\") in new stack -- Executing [s@macro-dialout-trunk:25] ExecIf(\"PJSIP/002-00000031\", \"1?Set(CONNECTEDLINE(name,i)=CID:002)\") in new stack -- Executing [s@macro-dialout-trunk:26] ExecIf(\"PJSIP/002-00000031\", \"0?Set(CONNECTEDLINE(name,i)=CID:(Hidden)002)\") in new stack -- Executing [s@macro-dialout-trunk:27] GotoIf(\"PJSIP/002-00000031\", \"0?customtrunk\") in new stack -- Executing [s@macro-dialout-trunk:28] ExecIf(\"PJSIP/002-00000031\", \"0?Set(DIAL_TRUNK_OPTIONS=)\") in new stack -- Executing [s@macro-dialout-trunk:29] Set(\"PJSIP/002-00000031\", \"HASH(__SIPHEADERS,Alert-Info)=unset\") in new stack -- Executing [s@macro-dialout-trunk:30] Dial(\"PJSIP/002-00000031\", \"IAX2/shar-orsk/1222,120,Tb(func-apply-sipheaders^s^1,(1))U(sub-send-obroute-email^1222^71222^1^1730780250^Support-ATC^002)\") in new stack -- IAX2/shar-orsk-32314 Internal Gosub(func-apply-sipheaders,s,1(1)) start -- Executing [s@func-apply-sipheaders:1] NoOp(\"IAX2/shar-orsk-32314\", \"Applying SIP Headers to channel IAX2/shar-orsk-32314\") in new stack -- Executing [s@func-apply-sipheaders:2] Set(\"IAX2/shar-orsk-32314\", \"TECH=IAX2\") in new stack -- Executing [s@func-apply-sipheaders:3] Set(\"IAX2/shar-orsk-32314\", \"SIPHEADERKEYS=Alert-Info\") in new stack -- Executing [s@func-apply-sipheaders:4] While(\"IAX2/shar-orsk-32314\", \"1\") in new stack -- Executing [s@func-apply-sipheaders:5] Set(\"IAX2/shar-orsk-32314\", \"sipheader=unset\") in new stack -- Executing [s@func-apply-sipheaders:6] ExecIf(\"IAX2/shar-orsk-32314\", \"0?Set(PJSIP_HEADER(remove,Alert-Info)=)\") in new stack -- Executing [s@func-apply-sipheaders:7] ExecIf(\"IAX2/shar-orsk-32314\", \"0?Set(sipheader=;info=unset)\") in new stack -- Executing [s@func-apply-sipheaders:8] ExecIf(\"IAX2/shar-orsk-32314\", \"0?Set(sipheader=unset)\") in new stack -- Executing [s@func-apply-sipheaders:9] ExecIf(\"IAX2/shar-orsk-32314\", \"0?Set(PJSIP_HEADER(add,Alert-Info)=unset)\") in new stack -- Executing [s@func-apply-sipheaders:10] EndWhile(\"IAX2/shar-orsk-32314\", \"\") in new stack -- Executing [s@func-apply-sipheaders:4] While(\"IAX2/shar-orsk-32314\", \"0\") in new stack -- Executing [s@func-apply-sipheaders:11] Return(\"IAX2/shar-orsk-32314\", \"\") in new stack == Spawn extension (, 71222, 1) exited non-zero on 'IAX2/shar-orsk-32314' -- IAX2/shar-orsk-32314 Internal Gosub(func-apply-sipheaders,s,1(1)) complete GOSUB_RETVAL= -- Called IAX2/shar-orsk/1222 -- Call accepted by 85.192.165.51:4569 (format alaw) -- Format for call is (alaw) -- IAX2/shar-orsk-32314 is ringing -- IAX2/shar-orsk-32314 is ringing -- IAX2/shar-orsk-32314 stopped sounds -- IAX2/shar-orsk-32314 is ringing -- IAX2/shar-orsk-32314 is ringing -- Hungup 'IAX2/shar-orsk-32314' == Spawn extension (macro-dialout-trunk, s, 30) exited non-zero on 'PJSIP/002-00000031' in macro 'dialout-trunk' == Spawn extension (from-internal, 71222, 11) exited non-zero on 'PJSIP/002-00000031' -- Executing [h@from-internal:1] Macro(\"PJSIP/002-00000031\", \"hangupcall\") in new stack -- Executing [s@macro-hangupcall:1] GotoIf(\"PJSIP/002-00000031\", \"1?theend\") in new stack -- Goto (macro-hangupcall,s,3) -- Executing [s@macro-hangupcall:3] Gosub(\"PJSIP/002-00000031\", \"sub-missedcallnotify,s,1()\") in new stack -- Executing [s@sub-missedcallnotify:1] NoOp(\"PJSIP/002-00000031\", \"CALLERID(number): 002\") in new stack -- Executing [s@sub-missedcallnotify:2] NoOp(\"PJSIP/002-00000031\", \"CALLERID(name): Support-ATC\") in new stack -- Executing [s@sub-missedcallnotify:3] NoOp(\"PJSIP/002-00000031\", \"DialStatus: CANCEL\") in new stack -- Executing [s@sub-missedcallnotify:4] NoOp(\"PJSIP/002-00000031\", \"VMSTATUS: \") in new stack -- Executing [s@sub-missedcallnotify:5] ExecIf(\"PJSIP/002-00000031\", \"0?System(curl -s -X POST https://api.telegram.org/bot/sendMessage -d parse_mode=html -d text=\"Пропущенный вызов: \\nНомер 002\\nИмя:Support-ATC\" -d chat_id=)\") in new stack -- Executing [s@sub-missedcallnotify:6] ExecIf(\"PJSIP/002-00000031\", \"0?System(curl -s -X POST https://api.telegram.org/bot/sendMessage -d parse_mode=html -d text=\"Пропущенный вызов: \\nНомер 002\\nИмя:Support-ATC\\nОставлено голосовое сообщение.\" -d chat_id=)\") in new stack == MixMonitor close filestream (mixed) == End MixMonitor Recording PJSIP/002-00000031 atsip-pbx*CLI\u003e От 4 до 9 детальность будет повышаться, а свыше 9 уже изменяться не будет.\n","wordCount":"1728","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-11-02T15:10:21+05:00","dateModified":"2024-11-02T15:10:21+05:00","author":{"@type":"Person","name":"Dmitriy Q"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/instructions/asterisk-cli/"},"publisher":{"@type":"Organization","name":"AtSIP","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="  (Alt + H)"><img src=http://localhost:1313/logo_hu4588996594597770302.png alt aria-label=logo height=35></a><div class=logo-switches></div></div><ul id=menu><li><a href=http://localhost:1313/articles/ title=Статьи><span>Статьи</span></a></li><li><a href=http://localhost:1313/instructions/ title=Инструкции><span>Инструкции</span></a></li><li><a href=http://localhost:1313/about/ title="О нас"><span>О нас</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/instructions/>Instructions</a></div><h1 class="post-title entry-hint-parent">Работа с CLI Asterisk</h1><div class=post-meta><span title='2024-11-02 15:10:21 +0500 +05'>November 2, 2024</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Dmitriy Q&nbsp;|&nbsp;<a href=https://github.com/atsip-ru/atsip-ru.github.io/tree/master/content/instructions/asterisk-cli.md rel="noopener noreferrer" target=_blank>Внесите изменения</a></div></header><div class=post-content><p>CLI (Command Line Interface) - очень полезный инструмент диагностики и отладки при работе с Asterisk.
Войти в него можно командой <code>asterisk -rvv</code> (или <code>sudo asterisk -rvv</code>), где количество <code>v</code> (verbose) означает детальность вывода, а <code>r</code> подключение к Asterisk.
<img loading=lazy src=/_resources/7d9e0cd304f7622a74cef7eb2f41e130.png alt=7d9e0cd304f7622a74cef7eb2f41e130.png>
При этом отобразится пользователь, от которого запущен Asterisk, его версия, имя машины, на которой запущено приложение и pid процесса.
<code>*CLI></code> означает интерактивный режим работы в CLI Asterisk.
Список всех <strong>доступных</strong> для Вашего Asterisk команд можно узнать командой <code>core show help</code>.
В Asterisk также отлично работает автодополнение команд, т.е. введя например <code>core show</code> и нажав клавишу Tab оно предложит все доступные варианты:
<img loading=lazy src=/_resources/d89cfd64504d754c64e789e35b8936a5.png alt=d89cfd64504d754c64e789e35b8936a5.png>
Ещё одна удобная функция CLI - <code>like</code>, тоесть поиск возможных вариантов среди всех доступных, например:
<img loading=lazy src=/_resources/8717af5c9825cdbd75a593f41b137529.png alt=8717af5c9825cdbd75a593f41b137529.png>
для <code>like</code> даже доступны базовые регулярные выражения, такие как якори и диапазоны:
<img loading=lazy src=/_resources/screenshot-2024-11-02-15-11-38.png alt="Снимок экрана от 2024-11-02 15-11-38"></p><p>Также есть 2 типа команд: <code>show</code> и <code>set</code> - первые абсолютно безвредны и лишь отображают текущее состояние, вторые - изменяют текущее состояние, поэтому советую их использовать крайне осторожно, а лучше менять эти параметры через файлы конфигурации.</p><p>Ну и разберу детальность (<code>v</code> значит <strong>verbose</strong>) вывода лога при вызове:</p><p>1 и 2 уровень:</p><p><img loading=lazy src=/_resources/screenshot-2024-11-05-09-17-25.png alt="Снимок экрана от 2024-11-05"></p><p>3 уровень:</p><pre tabindex=0><code>atsip-pbx*CLI&gt; core set verbose 3
Console verbose was 2 and is now 3.
  == Using SIP RTP Audio TOS bits 184
  == Using SIP RTP Audio CoS mark 5
    -- Executing [71222@from-internal:1] Macro(&#34;PJSIP/002-00000031&#34;, &#34;user-callerid,LIMIT,EXTERNAL,&#34;) in new stack
    -- Executing [s@macro-user-callerid:1] Set(&#34;PJSIP/002-00000031&#34;, &#34;TOUCH_MONITOR=1730780250.107&#34;) in new stack
    -- Executing [s@macro-user-callerid:2] Set(&#34;PJSIP/002-00000031&#34;, &#34;CHANCONTEXT=&#34;) in new stack
    -- Executing [s@macro-user-callerid:3] Set(&#34;PJSIP/002-00000031&#34;, &#34;CHANCONTEXT=&#34;) in new stack
    -- Executing [s@macro-user-callerid:4] Set(&#34;PJSIP/002-00000031&#34;, &#34;CHANEXTENCONTEXT=002-00000031&#34;) in new stack
    -- Executing [s@macro-user-callerid:5] Set(&#34;PJSIP/002-00000031&#34;, &#34;CHANEXTEN=002-00000031&#34;) in new stack
    -- Executing [s@macro-user-callerid:6] Set(&#34;PJSIP/002-00000031&#34;, &#34;CALLERID(number)=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:7] Set(&#34;PJSIP/002-00000031&#34;, &#34;AMPUSER=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:8] Set(&#34;PJSIP/002-00000031&#34;, &#34;HOTDESCKCHAN=002-00000031&#34;) in new stack
    -- Executing [s@macro-user-callerid:9] Set(&#34;PJSIP/002-00000031&#34;, &#34;HOTDESKEXTEN=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:10] Set(&#34;PJSIP/002-00000031&#34;, &#34;HOTDESKCALL=0&#34;) in new stack
    -- Executing [s@macro-user-callerid:11] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(HOTDESKCALL=1)&#34;) in new stack
    -- Executing [s@macro-user-callerid:12] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(name)=)&#34;) in new stack
    -- Executing [s@macro-user-callerid:13] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?report&#34;) in new stack
    -- Executing [s@macro-user-callerid:14] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;1?Set(REALCALLERIDNUM=002)&#34;) in new stack
    -- Executing [s@macro-user-callerid:15] Set(&#34;PJSIP/002-00000031&#34;, &#34;AMPUSER=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:16] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?limit&#34;) in new stack
    -- Executing [s@macro-user-callerid:17] Set(&#34;PJSIP/002-00000031&#34;, &#34;AMPUSERCIDNAME=Support-ATC&#34;) in new stack
    -- Executing [s@macro-user-callerid:18] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(__CIDMASQUERADING=TRUE)&#34;) in new stack
    -- Executing [s@macro-user-callerid:19] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?report&#34;) in new stack
    -- Executing [s@macro-user-callerid:20] Set(&#34;PJSIP/002-00000031&#34;, &#34;AMPUSERCID=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:21] Set(&#34;PJSIP/002-00000031&#34;, &#34;__DIAL_OPTIONS=HhTtr&#34;) in new stack
    -- Executing [s@macro-user-callerid:22] Set(&#34;PJSIP/002-00000031&#34;, &#34;CALLERID(all)=&#34;Support-ATC&#34; &lt;002&gt;&#34;) in new stack
    -- Executing [s@macro-user-callerid:23] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CUSDIAL=)&#34;) in new stack
    -- Executing [s@macro-user-callerid:24] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(all)=&#34;Support-ATC&#34; &lt;002&gt;)&#34;) in new stack
    -- Executing [s@macro-user-callerid:25] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?limit&#34;) in new stack
    -- Executing [s@macro-user-callerid:26] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;1?Set(GROUP(concurrency_limit)=002)&#34;) in new stack
    -- Executing [s@macro-user-callerid:27] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;Macro Depth is 1&#34;) in new stack
    -- Executing [s@macro-user-callerid:28] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?report2:macroerror&#34;) in new stack
    -- Goto (macro-user-callerid,s,29)
    -- Executing [s@macro-user-callerid:29] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?continue&#34;) in new stack
    -- Goto (macro-user-callerid,s,47)
    -- Executing [s@macro-user-callerid:47] Set(&#34;PJSIP/002-00000031&#34;, &#34;CALLERID(number)=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:48] Set(&#34;PJSIP/002-00000031&#34;, &#34;CALLERID(name)=Support-ATC&#34;) in new stack
    -- Executing [s@macro-user-callerid:49] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?cnum&#34;) in new stack
    -- Executing [s@macro-user-callerid:50] Set(&#34;PJSIP/002-00000031&#34;, &#34;CDR(cnam)=Support-ATC&#34;) in new stack
    -- Executing [s@macro-user-callerid:51] Set(&#34;PJSIP/002-00000031&#34;, &#34;CDR(cnum)=002&#34;) in new stack
    -- Executing [s@macro-user-callerid:52] Set(&#34;PJSIP/002-00000031&#34;, &#34;CHANNEL(language)=ru&#34;) in new stack
    -- Executing [71222@from-internal:2] Gosub(&#34;PJSIP/002-00000031&#34;, &#34;sub-record-check,s,1(out,71222,dontcare)&#34;) in new stack
    -- Executing [s@sub-record-check:1] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?initialized&#34;) in new stack
    -- Executing [s@sub-record-check:2] Set(&#34;PJSIP/002-00000031&#34;, &#34;__REC_STATUS=INITIALIZED&#34;) in new stack
    -- Executing [s@sub-record-check:3] Set(&#34;PJSIP/002-00000031&#34;, &#34;NOW=1730780250&#34;) in new stack
    -- Executing [s@sub-record-check:4] Set(&#34;PJSIP/002-00000031&#34;, &#34;__DAY=05&#34;) in new stack
    -- Executing [s@sub-record-check:5] Set(&#34;PJSIP/002-00000031&#34;, &#34;__MONTH=11&#34;) in new stack
    -- Executing [s@sub-record-check:6] Set(&#34;PJSIP/002-00000031&#34;, &#34;__YEAR=2024&#34;) in new stack
    -- Executing [s@sub-record-check:7] Set(&#34;PJSIP/002-00000031&#34;, &#34;__TIMESTR=20241105-091730&#34;) in new stack
    -- Executing [s@sub-record-check:8] Set(&#34;PJSIP/002-00000031&#34;, &#34;__FROMEXTEN=002&#34;) in new stack
    -- Executing [s@sub-record-check:9] Set(&#34;PJSIP/002-00000031&#34;, &#34;__MON_FMT=wav&#34;) in new stack
    -- Executing [s@sub-record-check:10] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;Recordings initialized&#34;) in new stack
    -- Executing [s@sub-record-check:11] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(ARG3=dontcare)&#34;) in new stack
    -- Executing [s@sub-record-check:12] Set(&#34;PJSIP/002-00000031&#34;, &#34;REC_POLICY_MODE_SAVE=&#34;) in new stack
    -- Executing [s@sub-record-check:13] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(REC_STATUS=NO)&#34;) in new stack
    -- Executing [s@sub-record-check:14] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;3?checkaction&#34;) in new stack
    -- Goto (sub-record-check,s,17)
    -- Executing [s@sub-record-check:17] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?sub-record-check,out,1&#34;) in new stack
    -- Goto (sub-record-check,out,1)
    -- Executing [out@sub-record-check:1] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;Outbound Recording Check from 002 to 71222&#34;) in new stack
    -- Executing [out@sub-record-check:2] Set(&#34;PJSIP/002-00000031&#34;, &#34;RECMODE=force&#34;) in new stack
    -- Executing [out@sub-record-check:3] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Goto(routewins)&#34;) in new stack
    -- Executing [out@sub-record-check:4] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Goto(routewins)&#34;) in new stack
    -- Executing [out@sub-record-check:5] Gosub(&#34;PJSIP/002-00000031&#34;, &#34;recordcheck,1(force,out,71222)&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:1] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;Starting recording check against force&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:2] Goto(&#34;PJSIP/002-00000031&#34;, &#34;force&#34;) in new stack
    -- Goto (sub-record-check,recordcheck,5)
    -- Executing [recordcheck@sub-record-check:5] Set(&#34;PJSIP/002-00000031&#34;, &#34;__REC_POLICY_MODE=FORCE&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:6] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?startrec&#34;) in new stack
    -- Goto (sub-record-check,recordcheck,16)
    -- Executing [recordcheck@sub-record-check:16] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;Starting recording: out, 71222&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:17] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(RECFROMEXTEN=)&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:18] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;1?Set(RECFROMEXTEN=002)&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:19] Set(&#34;PJSIP/002-00000031&#34;, &#34;__CALLFILENAME=out-71222-002-20241105-091730-1730780250.107&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:20] MixMonitor(&#34;PJSIP/002-00000031&#34;, &#34;2024/11/05/out-71222-002-20241105-091730-1730780250.107.wav,abi(),&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:21] Set(&#34;PJSIP/002-00000031&#34;, &#34;__MIXMON_ID=&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:22] Set(&#34;PJSIP/002-00000031&#34;, &#34;__RECORD_ID=PJSIP/002-00000031&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:23] Set(&#34;PJSIP/002-00000031&#34;, &#34;__REC_STATUS=RECORDING&#34;) in new stack
    -- Executing [recordcheck@sub-record-check:24] Set(&#34;PJSIP/002-00000031&#34;, &#34;CDR(recordingfile)=out-71222-002-20241105-091730-1730780250.107.wav&#34;) in new stack
  == Begin MixMonitor Recording PJSIP/002-00000031
    -- Executing [recordcheck@sub-record-check:25] Return(&#34;PJSIP/002-00000031&#34;, &#34;&#34;) in new stack
    -- Executing [out@sub-record-check:6] Return(&#34;PJSIP/002-00000031&#34;, &#34;&#34;) in new stack
    -- Executing [71222@from-internal:3] Set(&#34;PJSIP/002-00000031&#34;, &#34;ROUTE_CIDSAVE=&#34;Support-ATC&#34; &lt;002&gt;&#34;) in new stack
    -- Executing [71222@from-internal:4] Set(&#34;PJSIP/002-00000031&#34;, &#34;_ROUTEID=3&#34;) in new stack
    -- Executing [71222@from-internal:5] Set(&#34;PJSIP/002-00000031&#34;, &#34;_ROUTENAME=Shar-Orsk_7XXX&#34;) in new stack
    -- Executing [71222@from-internal:6] Set(&#34;PJSIP/002-00000031&#34;, &#34;MOHCLASS=default&#34;) in new stack
    -- Executing [71222@from-internal:7] Set(&#34;PJSIP/002-00000031&#34;, &#34;_CALLERIDNAMEINTERNAL=Support-ATC&#34;) in new stack
    -- Executing [71222@from-internal:8] Set(&#34;PJSIP/002-00000031&#34;, &#34;_CALLERIDNUMINTERNAL=002&#34;) in new stack
    -- Executing [71222@from-internal:9] Set(&#34;PJSIP/002-00000031&#34;, &#34;_EMAILNOTIFICATION=FALSE&#34;) in new stack
    -- Executing [71222@from-internal:10] Set(&#34;PJSIP/002-00000031&#34;, &#34;_NODEST=&#34;) in new stack
    -- Executing [71222@from-internal:11] Macro(&#34;PJSIP/002-00000031&#34;, &#34;dialout-trunk,1,1222,,off&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:1] Set(&#34;PJSIP/002-00000031&#34;, &#34;DIAL_TRUNK=1&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:2] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_OPTIONS=Hhtr)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:3] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_OPTIONS=HhTr)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:4] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_OPTIONS=Hhtr)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:5] GosubIf(&#34;PJSIP/002-00000031&#34;, &#34;0?sub-pincheck,s,1()&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:6] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(num)=002)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:7] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?disabletrunk,1&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:8] Set(&#34;PJSIP/002-00000031&#34;, &#34;DIAL_NUMBER=1222&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:9] Set(&#34;PJSIP/002-00000031&#34;, &#34;DIAL_TRUNK_OPTIONS=HhTtr&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:10] Set(&#34;PJSIP/002-00000031&#34;, &#34;OUTBOUND_GROUP=OUT_1&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:11] Set(&#34;PJSIP/002-00000031&#34;, &#34;DIAL_TRUNK_OPTIONS=T&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:12] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_TRUNK_OPTIONS=)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:13] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?nomax&#34;) in new stack
    -- Goto (macro-dialout-trunk,s,15)
    -- Executing [s@macro-dialout-trunk:15] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?skipoutcid&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:16] Macro(&#34;PJSIP/002-00000031&#34;, &#34;outbound-callerid,1&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:1] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;002&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:2] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:3] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;off&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:4] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(name-pres)=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:5] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(num-pres)=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:6] Set(&#34;PJSIP/002-00000031&#34;, &#34;HOTDESCKCHAN=002-00000031&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:7] Set(&#34;PJSIP/002-00000031&#34;, &#34;HOTDESKEXTEN=002&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:8] Set(&#34;PJSIP/002-00000031&#34;, &#34;HOTDESKCALL=0&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:9] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(HOTDESKCALL=1)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:10] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(name)=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:11] Set(&#34;PJSIP/002-00000031&#34;, &#34;ALLOWTHISROUTE=NO&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:12] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(ALLOWTHISROUTE=YES)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:13] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Hangup()&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:14] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(REALCALLERIDNUM=002)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:15] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(AMPUSER=002)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:16] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?normcid&#34;) in new stack
    -- Goto (macro-outbound-callerid,s,20)
    -- Executing [s@macro-outbound-callerid:20] Set(&#34;PJSIP/002-00000031&#34;, &#34;USEROUTCID=&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:21] Set(&#34;PJSIP/002-00000031&#34;, &#34;EMERGENCYCID=&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:22] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(EMERGENCYCID=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:23] Set(&#34;PJSIP/002-00000031&#34;, &#34;TRUNKOUTCID=&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:24] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?trunkcid&#34;) in new stack
    -- Goto (macro-outbound-callerid,s,30)
    -- Executing [s@macro-outbound-callerid:30] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(all)=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:31] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(all)=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:32] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(all)=)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:33] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(all)=002)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:34] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(all)=002)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:35] Set(&#34;PJSIP/002-00000031&#34;, &#34;TIOHIDE=no&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:36] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(name-pres)=prohib_passed_screen)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:37] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(num-pres)=prohib_passed_screen)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:38] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(name-pres)=prohib_passed_screen)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:39] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CALLERID(num-pres)=prohib_passed_screen)&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:40] Set(&#34;PJSIP/002-00000031&#34;, &#34;CDR(outbound_cnum)=002&#34;) in new stack
    -- Executing [s@macro-outbound-callerid:41] Set(&#34;PJSIP/002-00000031&#34;, &#34;CDR(outbound_cnam)=Support-ATC&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:17] GosubIf(&#34;PJSIP/002-00000031&#34;, &#34;0?sub-flp-1,s,1()&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:18] Set(&#34;PJSIP/002-00000031&#34;, &#34;OUTNUM=1222&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:19] Set(&#34;PJSIP/002-00000031&#34;, &#34;custom=IAX2/shar-orsk&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:20] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_TRUNK_OPTIONS=M(setmusic^default)T)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:21] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_TRUNK_OPTIONS=TM(confirm))&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:22] Macro(&#34;PJSIP/002-00000031&#34;, &#34;dialout-trunk-predial-hook,&#34;) in new stack
    -- Executing [s@macro-dialout-trunk-predial-hook:1] MacroExit(&#34;PJSIP/002-00000031&#34;, &#34;&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:23] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?bypass,1&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:24] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;1?Set(CONNECTEDLINE(num,i)=1222)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:25] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;1?Set(CONNECTEDLINE(name,i)=CID:002)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:26] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(CONNECTEDLINE(name,i)=CID:(Hidden)002)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:27] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;0?customtrunk&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:28] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?Set(DIAL_TRUNK_OPTIONS=)&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:29] Set(&#34;PJSIP/002-00000031&#34;, &#34;HASH(__SIPHEADERS,Alert-Info)=unset&#34;) in new stack
    -- Executing [s@macro-dialout-trunk:30] Dial(&#34;PJSIP/002-00000031&#34;, &#34;IAX2/shar-orsk/1222,120,Tb(func-apply-sipheaders^s^1,(1))U(sub-send-obroute-email^1222^71222^1^1730780250^Support-ATC^002)&#34;) in new stack
    -- IAX2/shar-orsk-32314 Internal Gosub(func-apply-sipheaders,s,1(1)) start
    -- Executing [s@func-apply-sipheaders:1] NoOp(&#34;IAX2/shar-orsk-32314&#34;, &#34;Applying SIP Headers to channel IAX2/shar-orsk-32314&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:2] Set(&#34;IAX2/shar-orsk-32314&#34;, &#34;TECH=IAX2&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:3] Set(&#34;IAX2/shar-orsk-32314&#34;, &#34;SIPHEADERKEYS=Alert-Info&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:4] While(&#34;IAX2/shar-orsk-32314&#34;, &#34;1&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:5] Set(&#34;IAX2/shar-orsk-32314&#34;, &#34;sipheader=unset&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:6] ExecIf(&#34;IAX2/shar-orsk-32314&#34;, &#34;0?Set(PJSIP_HEADER(remove,Alert-Info)=)&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:7] ExecIf(&#34;IAX2/shar-orsk-32314&#34;, &#34;0?Set(sipheader=&lt;http://127.0.0.1&gt;;info=unset)&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:8] ExecIf(&#34;IAX2/shar-orsk-32314&#34;, &#34;0?Set(sipheader=&lt;http://127.0.0.1&gt;unset)&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:9] ExecIf(&#34;IAX2/shar-orsk-32314&#34;, &#34;0?Set(PJSIP_HEADER(add,Alert-Info)=unset)&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:10] EndWhile(&#34;IAX2/shar-orsk-32314&#34;, &#34;&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:4] While(&#34;IAX2/shar-orsk-32314&#34;, &#34;0&#34;) in new stack
    -- Executing [s@func-apply-sipheaders:11] Return(&#34;IAX2/shar-orsk-32314&#34;, &#34;&#34;) in new stack
  == Spawn extension (, 71222, 1) exited non-zero on &#39;IAX2/shar-orsk-32314&#39;
    -- IAX2/shar-orsk-32314 Internal Gosub(func-apply-sipheaders,s,1(1)) complete GOSUB_RETVAL=
    -- Called IAX2/shar-orsk/1222
    -- Call accepted by 85.192.165.51:4569 (format alaw)
    -- Format for call is (alaw)
    -- IAX2/shar-orsk-32314 is ringing
    -- IAX2/shar-orsk-32314 is ringing
    -- IAX2/shar-orsk-32314 stopped sounds
    -- IAX2/shar-orsk-32314 is ringing
    -- IAX2/shar-orsk-32314 is ringing
    -- Hungup &#39;IAX2/shar-orsk-32314&#39;
  == Spawn extension (macro-dialout-trunk, s, 30) exited non-zero on &#39;PJSIP/002-00000031&#39; in macro &#39;dialout-trunk&#39;
  == Spawn extension (from-internal, 71222, 11) exited non-zero on &#39;PJSIP/002-00000031&#39;
    -- Executing [h@from-internal:1] Macro(&#34;PJSIP/002-00000031&#34;, &#34;hangupcall&#34;) in new stack
    -- Executing [s@macro-hangupcall:1] GotoIf(&#34;PJSIP/002-00000031&#34;, &#34;1?theend&#34;) in new stack
    -- Goto (macro-hangupcall,s,3)
    -- Executing [s@macro-hangupcall:3] Gosub(&#34;PJSIP/002-00000031&#34;, &#34;sub-missedcallnotify,s,1()&#34;) in new stack
    -- Executing [s@sub-missedcallnotify:1] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;CALLERID(number): 002&#34;) in new stack
    -- Executing [s@sub-missedcallnotify:2] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;CALLERID(name): Support-ATC&#34;) in new stack
    -- Executing [s@sub-missedcallnotify:3] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;DialStatus: CANCEL&#34;) in new stack
    -- Executing [s@sub-missedcallnotify:4] NoOp(&#34;PJSIP/002-00000031&#34;, &#34;VMSTATUS: &#34;) in new stack
    -- Executing [s@sub-missedcallnotify:5] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?System(curl -s -X POST https://api.telegram.org/bot/sendMessage -d parse_mode=html -d text=&#34;Пропущенный вызов: \nНомер 002\nИмя:Support-ATC&#34; -d chat_id=)&#34;) in new stack
    -- Executing [s@sub-missedcallnotify:6] ExecIf(&#34;PJSIP/002-00000031&#34;, &#34;0?System(curl -s -X POST https://api.telegram.org/bot/sendMessage -d parse_mode=html -d text=&#34;Пропущенный вызов: \nНомер 002\nИмя:Support-ATC\nОставлено голосовое сообщение.&#34; -d chat_id=)&#34;) in new stack
  == MixMonitor close filestream (mixed)
  == End MixMonitor Recording PJSIP/002-00000031
atsip-pbx*CLI&gt;
</code></pre><p>От 4 до 9 детальность будет повышаться, а свыше 9 уже изменяться не будет.</p></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Работа с CLI Asterisk on x" href="https://x.com/intent/tweet/?text=%d0%a0%d0%b0%d0%b1%d0%be%d1%82%d0%b0%20%d1%81%20CLI%20Asterisk&amp;url=http%3a%2f%2flocalhost%3a1313%2finstructions%2fasterisk-cli%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Работа с CLI Asterisk on telegram" href="https://telegram.me/share/url?text=%d0%a0%d0%b0%d0%b1%d0%be%d1%82%d0%b0%20%d1%81%20CLI%20Asterisk&amp;url=http%3a%2f%2flocalhost%3a1313%2finstructions%2fasterisk-cli%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>AtSIP</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>